<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Yaml (yaml.Yaml)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v2.3.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">yaml</a> &#x00BB; Yaml</nav><header class="odoc-preamble"><h1>Module <code><span>Yaml</span></code></h1><p>A library for parsing and emitting YAML.</p><p>It is based on a binding to <a href="http://pyyaml.org/wiki/LibYAML:">libyaml</a> which covers the generation and parsing processes.</p><p>Most simple use cases can simply use the <a href="#val-of_string"><code>of_string</code></a> and <a href="#val-to_string"><code>to_string</code></a> functions, which are compatible with the <code>Ezjsonm</code> types. This means that you can convert between JSON and Yaml format easily.</p><p>If you use more advanced Yaml features such as aliases or anchors, then the <a href="#type-yaml"><code>yaml</code></a> type and <a href="#val-yaml_of_string"><code>yaml_of_string</code></a> and <a href="#val-yaml_to_string"><code>yaml_to_string</code></a> functions will be more useful. The library does not yet support expanding aliases into the JSON format from YAML, so that will currently result in an error.</p></header><nav class="odoc-toc"><ul><li><a href="#types">Types</a></li><li><a href="#serialisers-and-deserialisers">Serialisers and deserialisers</a><ul><li><a href="#json-compatible-functions">JSON-compatible functions</a></li><li><a href="#yaml-specific-functions">Yaml-specific functions</a></li></ul></li><li><a href="#json/yaml-conversion-functions">JSON/Yaml conversion functions</a></li></ul></nav><div class="odoc-content"><h3 id="types"><a href="#types" class="anchor"></a>Types</h3><div class="odoc-spec"><div class="spec type anchored" id="type-value"><a href="#type-value" class="anchor"></a><code><span><span class="keyword">type</span> value</span><span> = </span><span>[ </span></code><ol><li id="type-value.Null" class="def constructor anchored"><a href="#type-value.Null" class="anchor"></a><code><span>| </span></code><code><span>`Null</span></code></li><li id="type-value.Bool" class="def constructor anchored"><a href="#type-value.Bool" class="anchor"></a><code><span>| </span></code><code><span>`Bool <span class="keyword">of</span> bool</span></code></li><li id="type-value.Float" class="def constructor anchored"><a href="#type-value.Float" class="anchor"></a><code><span>| </span></code><code><span>`Float <span class="keyword">of</span> float</span></code></li><li id="type-value.String" class="def constructor anchored"><a href="#type-value.String" class="anchor"></a><code><span>| </span></code><code><span>`String <span class="keyword">of</span> string</span></code></li><li id="type-value.A" class="def constructor anchored"><a href="#type-value.A" class="anchor"></a><code><span>| </span></code><code><span>`A <span class="keyword">of</span> <span><a href="#type-value">value</a> list</span></span></code></li><li id="type-value.O" class="def constructor anchored"><a href="#type-value.O" class="anchor"></a><code><span>| </span></code><code><span>`O <span class="keyword">of</span> <span><span>(string * <a href="#type-value">value</a>)</span> list</span></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p><code>value</code> is the subset of a Yaml document that is compatible with JSON. This type is the same as <code>Ezjsonm.value</code>, and so most simple uses of Yaml can be interchanged with JSON.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-yaml"><a href="#type-yaml" class="anchor"></a><code><span><span class="keyword">type</span> yaml</span><span> = </span><span>[ </span></code><ol><li id="type-yaml.Scalar" class="def constructor anchored"><a href="#type-yaml.Scalar" class="anchor"></a><code><span>| </span></code><code><span>`Scalar <span class="keyword">of</span> <a href="#type-scalar">scalar</a></span></code></li><li id="type-yaml.Alias" class="def constructor anchored"><a href="#type-yaml.Alias" class="anchor"></a><code><span>| </span></code><code><span>`Alias <span class="keyword">of</span> string</span></code></li><li id="type-yaml.A" class="def constructor anchored"><a href="#type-yaml.A" class="anchor"></a><code><span>| </span></code><code><span>`A <span class="keyword">of</span> <a href="#type-sequence">sequence</a></span></code></li><li id="type-yaml.O" class="def constructor anchored"><a href="#type-yaml.O" class="anchor"></a><code><span>| </span></code><code><span>`O <span class="keyword">of</span> <a href="#type-mapping">mapping</a></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p><code>yaml</code> is the representation of a Yaml document that preserves alias information and other Yaml-specific metadata that cannot be represented in JSON. It is not recommended to convert untrusted Yaml with aliases into JSON due to the risk of denial-of-service via a <a href="https://en.wikipedia.org/wiki/Billion_laughs_attack">Billion Laughs attack</a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-scalar"><a href="#type-scalar" class="anchor"></a><code><span><span class="keyword">and</span> scalar</span><span> = </span><span>{</span></code><ol><li id="type-scalar.anchor" class="def record field anchored"><a href="#type-scalar.anchor" class="anchor"></a><code><span>anchor : <span>string option</span>;</span></code></li><li id="type-scalar.tag" class="def record field anchored"><a href="#type-scalar.tag" class="anchor"></a><code><span>tag : <span>string option</span>;</span></code></li><li id="type-scalar.value" class="def record field anchored"><a href="#type-scalar.value" class="anchor"></a><code><span>value : string;</span></code></li><li id="type-scalar.plain_implicit" class="def record field anchored"><a href="#type-scalar.plain_implicit" class="anchor"></a><code><span>plain_implicit : bool;</span></code></li><li id="type-scalar.quoted_implicit" class="def record field anchored"><a href="#type-scalar.quoted_implicit" class="anchor"></a><code><span>quoted_implicit : bool;</span></code></li><li id="type-scalar.style" class="def record field anchored"><a href="#type-scalar.style" class="anchor"></a><code><span>style : <a href="#type-scalar_style">scalar_style</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p><code>scalar</code> is the description of a Yaml scalar.</p><p>Scalar values are represented as strings. A scalar can optionally have an <code>anchor</code> and a <code>tag</code>. The flow style of the scalar is defined by the <code>style</code> field. If <code>plain_implicit</code> is <code>true</code>, the tag is optional for the plain style. If <code>quoted_implicit</code> is <code>true</code>, the tag is optional for any non-plain style.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-sequence"><a href="#type-sequence" class="anchor"></a><code><span><span class="keyword">and</span> sequence</span><span> = </span><span>{</span></code><ol><li id="type-sequence.s_anchor" class="def record field anchored"><a href="#type-sequence.s_anchor" class="anchor"></a><code><span>s_anchor : <span>string option</span>;</span></code></li><li id="type-sequence.s_tag" class="def record field anchored"><a href="#type-sequence.s_tag" class="anchor"></a><code><span>s_tag : <span>string option</span>;</span></code></li><li id="type-sequence.s_implicit" class="def record field anchored"><a href="#type-sequence.s_implicit" class="anchor"></a><code><span>s_implicit : bool;</span></code></li><li id="type-sequence.s_members" class="def record field anchored"><a href="#type-sequence.s_members" class="anchor"></a><code><span>s_members : <span><a href="#type-yaml">yaml</a> list</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p><code>sequence</code> is the description of a Yaml sequence.</p><p>Sequences are similar to JSON arrays. A Yaml sequence can have an <code>s_anchor</code> and an <code>s_tag</code>. If <code>s_implicit</code> is <code>true</code>, the <code>s_tag</code> is optional.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-mapping"><a href="#type-mapping" class="anchor"></a><code><span><span class="keyword">and</span> mapping</span><span> = </span><span>{</span></code><ol><li id="type-mapping.m_anchor" class="def record field anchored"><a href="#type-mapping.m_anchor" class="anchor"></a><code><span>m_anchor : <span>string option</span>;</span></code></li><li id="type-mapping.m_tag" class="def record field anchored"><a href="#type-mapping.m_tag" class="anchor"></a><code><span>m_tag : <span>string option</span>;</span></code></li><li id="type-mapping.m_implicit" class="def record field anchored"><a href="#type-mapping.m_implicit" class="anchor"></a><code><span>m_implicit : bool;</span></code></li><li id="type-mapping.m_members" class="def record field anchored"><a href="#type-mapping.m_members" class="anchor"></a><code><span>m_members : <span><span>(<a href="#type-yaml">yaml</a> * <a href="#type-yaml">yaml</a>)</span> list</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p><code>mapping</code> is the description of a Yaml mapping.</p><p>Mappings are similar to JSON objects. A Yaml object can have an <code>m_anchor</code> and an <code>m_tag</code>. If <code>m_implicit</code> is <code>true</code>, the <code>m_tag</code> is optional. A key in a Yaml mapping can be an arbitrary Yaml node.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-scalar_style"><a href="#type-scalar_style" class="anchor"></a><code><span><span class="keyword">and</span> scalar_style</span><span> = </span><span>[ </span></code><ol><li id="type-scalar_style.Any" class="def constructor anchored"><a href="#type-scalar_style.Any" class="anchor"></a><code><span>| </span></code><code><span>`Any</span></code></li><li id="type-scalar_style.Plain" class="def constructor anchored"><a href="#type-scalar_style.Plain" class="anchor"></a><code><span>| </span></code><code><span>`Plain</span></code></li><li id="type-scalar_style.Single_quoted" class="def constructor anchored"><a href="#type-scalar_style.Single_quoted" class="anchor"></a><code><span>| </span></code><code><span>`Single_quoted</span></code></li><li id="type-scalar_style.Double_quoted" class="def constructor anchored"><a href="#type-scalar_style.Double_quoted" class="anchor"></a><code><span>| </span></code><code><span>`Double_quoted</span></code></li><li id="type-scalar_style.Literal" class="def constructor anchored"><a href="#type-scalar_style.Literal" class="anchor"></a><code><span>| </span></code><code><span>`Literal</span></code></li><li id="type-scalar_style.Folded" class="def constructor anchored"><a href="#type-scalar_style.Folded" class="anchor"></a><code><span>| </span></code><code><span>`Folded</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>YAML provides three flow scalar styles: double-quoted, single-quoted and plain (unquoted). Each provides a different trade-off between readability and expressive power. The <a href="http://www.yaml.org/spec/1.2/spec.html#id2786942:">Yaml spec section 7.3</a> has more details.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-version"><a href="#type-version" class="anchor"></a><code><span><span class="keyword">type</span> version</span><span> = </span><span>[ </span></code><ol><li id="type-version.V1_1" class="def constructor anchored"><a href="#type-version.V1_1" class="anchor"></a><code><span>| </span></code><code><span>`V1_1</span></code></li><li id="type-version.V1_2" class="def constructor anchored"><a href="#type-version.V1_2" class="anchor"></a><code><span>| </span></code><code><span>`V1_2</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Version of the YAML spec of a document. Refer to the <a href="http://www.yaml.org/spec/1.2/spec.html">Yaml specification</a> for details of the differences between versions.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-encoding"><a href="#type-encoding" class="anchor"></a><code><span><span class="keyword">type</span> encoding</span><span> = </span><span>[ </span></code><ol><li id="type-encoding.Any" class="def constructor anchored"><a href="#type-encoding.Any" class="anchor"></a><code><span>| </span></code><code><span>`Any</span></code></li><li id="type-encoding.Utf16be" class="def constructor anchored"><a href="#type-encoding.Utf16be" class="anchor"></a><code><span>| </span></code><code><span>`Utf16be</span></code></li><li id="type-encoding.Utf16le" class="def constructor anchored"><a href="#type-encoding.Utf16le" class="anchor"></a><code><span>| </span></code><code><span>`Utf16le</span></code></li><li id="type-encoding.Utf8" class="def constructor anchored"><a href="#type-encoding.Utf8" class="anchor"></a><code><span>| </span></code><code><span>`Utf8</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Document encoding. The recommended format is <code>Utf8</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-layout_style"><a href="#type-layout_style" class="anchor"></a><code><span><span class="keyword">type</span> layout_style</span><span> = </span><span>[ </span></code><ol><li id="type-layout_style.Any" class="def constructor anchored"><a href="#type-layout_style.Any" class="anchor"></a><code><span>| </span></code><code><span>`Any</span></code></li><li id="type-layout_style.Block" class="def constructor anchored"><a href="#type-layout_style.Block" class="anchor"></a><code><span>| </span></code><code><span>`Block</span></code></li><li id="type-layout_style.Flow" class="def constructor anchored"><a href="#type-layout_style.Flow" class="anchor"></a><code><span>| </span></code><code><span>`Flow</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Mappings and sequences can be rendered in two different ways:</p><ul><li><code>Flow</code> styles can be thought of as the natural extension of JSON to cover folding long content lines for readability, tagging nodes to control construction of native data structures, and using anchors and aliases to reuse constructed object instances.</li><li><code>Block</code> styles employ indentation rather than indicators to denote structure. This results in a more human readable (though less compact) notation.</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-res"><a href="#type-res" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a res</span></span><span> = <span><span>(<span class="type-var">'a</span>, <span>[ <span>`Msg of string</span> ]</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>This library uses the standard <code>result</code> type for returning errors rather than raising exceptions.</p></div></div><h3 id="serialisers-and-deserialisers"><a href="#serialisers-and-deserialisers" class="anchor"></a>Serialisers and deserialisers</h3><p>Most simple uses of Yaml can use the JSON-compatible subset. If you really need Yaml-specific features such as aliases, then they are also available.</p><h4 id="json-compatible-functions"><a href="#json-compatible-functions" class="anchor"></a>JSON-compatible functions</h4><div class="odoc-spec"><div class="spec value anchored" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span><span class="keyword">val</span> of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-value">value</a> <a href="#type-res">res</a></span></span></code></div><div class="spec-doc"><p><code>of_string s</code> parses <code>s</code> into a JSON <a href="#type-scalar.value"><code>value</code></a> representation, discarding any Yaml-specific information such as anchors or tags.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_string_exn"><a href="#val-of_string_exn" class="anchor"></a><code><span><span class="keyword">val</span> of_string_exn : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-value">value</a></span></code></div><div class="spec-doc"><p><code>of_string_exn s</code> acts as <a href="#val-of_string"><code>of_string</code></a>, but raises <code>Invalid_argument</code> if there is an error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : 
  <span><span class="optlabel">?len</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?encoding</span>:<a href="#type-encoding">encoding</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?scalar_style</span>:<a href="#type-scalar_style">scalar_style</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?layout_style</span>:<a href="#type-layout_style">layout_style</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-value">value</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <a href="#type-res">res</a></span></span></code></div><div class="spec-doc"><p><code>to_string v</code> converts the JSON value to a Yaml string representation. The <code>encoding</code>, <code>scalar_style</code> and <code>layout_style</code> control the various output parameters. The current implementation uses a non-resizable internal string buffer of 256KB, which can be increased via <code>len</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string_exn"><a href="#val-to_string_exn" class="anchor"></a><code><span><span class="keyword">val</span> to_string_exn : 
  <span><span class="optlabel">?len</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?encoding</span>:<a href="#type-encoding">encoding</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?scalar_style</span>:<a href="#type-scalar_style">scalar_style</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?layout_style</span>:<a href="#type-layout_style">layout_style</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-value">value</a> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div><div class="spec-doc"><p><code>to_string_exn v</code> acts as <a href="#val-to_string"><code>to_string</code></a>, but raises <code>Invalid_argument</code> in if there is an error.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-value">value</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp ppf s</code> will output the Yaml value <code>s</code> to the formatter <code>ppf</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-value">value</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-value">value</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal v1 v2</code> is <code>true</code> iff <code>v1</code> and <code>v2</code> are equal.</p></div></div><h4 id="yaml-specific-functions"><a href="#yaml-specific-functions" class="anchor"></a>Yaml-specific functions</h4><div class="odoc-spec"><div class="spec value anchored" id="val-yaml_of_string"><a href="#val-yaml_of_string" class="anchor"></a><code><span><span class="keyword">val</span> yaml_of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-yaml">yaml</a> <a href="#type-res">res</a></span></span></code></div><div class="spec-doc"><p><code>yaml_of_string s</code> parses <code>s</code> into a Yaml <a href="#type-yaml"><code>yaml</code></a> representation, preserving Yaml-specific information such as anchors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-yaml_to_string"><a href="#val-yaml_to_string" class="anchor"></a><code><span><span class="keyword">val</span> yaml_to_string : 
  <span><span class="optlabel">?len</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?encoding</span>:<a href="#type-encoding">encoding</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?scalar_style</span>:<a href="#type-scalar_style">scalar_style</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?layout_style</span>:<a href="#type-layout_style">layout_style</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-yaml">yaml</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <a href="#type-res">res</a></span></span></code></div><div class="spec-doc"><p><code>yaml_to_string v</code> converts the Yaml value to a string representation. The <code>encoding</code>, <code>scalar_style</code> and <code>layout_style</code> control the various output parameters. The current implementation uses a non-resizable internal string buffer of 256KB, which can be increased via <code>len</code>.</p></div></div><h3 id="json/yaml-conversion-functions"><a href="#json/yaml-conversion-functions" class="anchor"></a>JSON/Yaml conversion functions</h3><div class="odoc-spec"><div class="spec value anchored" id="val-to_json"><a href="#val-to_json" class="anchor"></a><code><span><span class="keyword">val</span> to_json : <span><a href="#type-yaml">yaml</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-value">value</a> <a href="#type-res">res</a></span></span></code></div><div class="spec-doc"><p><code>to_json yaml</code> will convert the Yaml document into a simpler JSON representation, discarding any anchors or tags from the original. Returns an error if any aliases are used within the body of the Yaml input.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_json"><a href="#val-of_json" class="anchor"></a><code><span><span class="keyword">val</span> of_json : <span><a href="#type-value">value</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-yaml">yaml</a> <a href="#type-res">res</a></span></span></code></div><div class="spec-doc"><p><code>of_json j</code> converts the JSON representation into a Yaml representation.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Stream"><a href="#module-Stream" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Stream/index.html">Stream</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Low-level event streaming interface for parsing and emitting YAML files.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Util"><a href="#module-Util" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Util/index.html">Util</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
