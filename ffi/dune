(library
 (name yaml_ffi)
 (public_name yaml.ffi)
 (libraries sexplib)
 (foreign_archives ../vendor/yaml_c)
 (ctypes
  (external_library_name yaml)
  (build_flags_resolver
   (vendored
     ; hack: repeated include dirs from root and relative since this gets
     ;  called from multiple places
    (c_flags (-I../vendor/headers -Ivendor/headers))))
  (headers (preamble "#if defined(__MINGW32__) || defined(__MINGW64__)
#define __USE_MINGW_ANSI_STDIO 1
#include <stdio.h> /* see: https://sourceforge.net/p/mingw-w64/bugs/627/ */
#endif
#include <yaml.h>
"))
  (type_descriptions Type_descriptions)
  (function_descriptions Function_descriptions)
  (generated_entry_point C)))
